<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Coffeefy</title>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/wow.js"></script>
    <script src="js/scripts.js"></script>
    <script src="js/external/browserMqtt.js"></script>
    <meta name="description" content="The Senseo Whisperer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Codeply">
    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" href="./css/animate.min.css" />
    <link rel="stylesheet" href="./css/ionicons.min.css" />
    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/font-mfizz.css" />

  </head>
  <body>
    <nav id="topNav" class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="#first"><i class="ion-coffee"></i> Coffeefy</a>
            </div>
            <div class="navbar-collapse collapse" id="bs-navbar">
                <ul class="nav navbar-nav">
                    <li>
                        <a class="page-scroll" href="#one">Info</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#two">Hardware</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#twotwo">Software</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#three">Bilder</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#four">Features</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#last">Kontakt</a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                      <div class="toggle">
                          <a class="nav navbar-nav" href="#video-background" id="toggleVideo" data-toggle="collapse">
                            <i class="icon ion-toggle-filled toggleon" id="on" style="display:none">VIDEO AN</i>
                            <i class="icon ion-toggle toggleoff" id="off">VIDEO AUS</i>
                          </a>
                      </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <header id="first">
        <div class="header-content">
            <div class="inner">
                <h1 class="cursive">- Coffeefy -</h1>
                <h4>The Senseo Whisperer</h4>
                <hr>

                <form action="python/makeSmallCoffee/" method="get" target="hiddenFrame">
                  <button id="small" class="btn btn-primary btn-xl page-scroll">Small Coffee</button> &nbsp;
                   <form action="python/makeBigCoffee/" method="get" target="hiddenFrame">
                     <button id="big" class="btn btn-primary btn-xl page-scroll">Big Coffee</button>
                  </form>

                 <!-- <a href="#one" class="btn btn-primary btn-xl page-scroll">Big Coffee</a> -->
                </form>

                  <div>
                  <div id="myBar" class="w3-container w3-green" style="height:24px;width:20%"></div>
                  </div>
                    <p id="status"></p>
                    <p id="messages"></p>
                  </div>



            </div>

        </div>
        <video autoplay="" loop="" class="fillWidth fadeIn wow collapse in" data-wow-delay="0.5s" poster="./assets/coffee_stop.png" id="video-background">
            <source src="./assets/coffee.mp4" type="video/mp4">Your browser does not support the video tag. I suggest you upgrade your browser.
            <source src="./assets/coffee_small.mp4" type="video/mp4" media="all and (max-width:480px)">
        </video>



    </header>
    <section class="bg-primary" id="one">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 text-center">
                  <h2 class="margin-top-0 text-thred">Info</h2>
                    <br>

                    <p class="text-faded">
                      Coffeefy ist ein Projekt der TH Köln, welches im Modul IOT (Internet of Things) erstellt und
                      in der QQ2 (Querschnitsqualifikation) ausgearbeitet wurde.
                    </p>

                      <hr>
                      <div class="col-lg-4 col-sm-6">
                          <a href="#galleryModal" class="pull-right gallery-box" data-toggle="modal" data-src="./assets/logo.png">
                              <img src="./assets/logo.png" class="img-responsive" alt="TH Koeln Logo">
                              <div class="gallery-box-caption">
                                  <div class="gallery-box-content">
                                      <div>
                                          <i class="icon-lg ion-ios-search"></i>
                                      </div>
                                  </div>
                              </div>
                          </a>
                      </div>
                    <p class="text-faded">
                      Coffeefy lässt den Nutzer mithilfe seines Computer, Tablet oder Handy frischen Kaffee per Knopfdruck brühen.
                      Die Idee ist es, seine Senseo Kaffeemaschine mit zusätzlicher Hardware auszustatten und diese mit unserem Programm anzusteuern.
                    </p>
                    <hr>
                    <p class="text-faded">
                      Im weiteren wird erklärt, wie das Projekt funktioniert und welche Komponenten benötigt sind.
                    </p>
                    <br>
                    <p>
                      Schaubild Aufbau coffeefy
                    </p>
                </div>
            </div>
            <div class="row">
              <div class="col">
            <a href="#galleryModal" class="gallery-box" data-toggle="modal" data-src="./assets/bild2.png">
                <img src="./assets/bild2.png" class="img-responsive" alt="TH Koeln Logo">
                <div class="gallery-box-caption">
                    <div class="gallery-box-content">
                        <div>
                            <i class="icon-lg ion-ios-search"></i>
                        </div>
                    </div>
                </div>
            </a>
          </div>
        </div>
        </div>
    </section>
    <section id="two">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="margin-top-0 text-thorange">Benutzte Hardware</h2>
                    <hr class="primary">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-android-laptop wow fadeIn" data-wow-delay=".3s"></i>
                        <h3>Senseo</h3>
                        <p class="text-muted">Senseo 7810 Kaffee Maschine</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="icon-lg icon-raspberrypi wow fadeIn" data-wow-delay=".3s"></i>
                        <h3>Rasberry Pi</h3>
                        <p class="text-muted">Rasberry Pi 3 (Jessie)</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-ios-star-outline wow fadeIn" data-wow-delay=".3s"></i>
                        <h3>Anschlusskabel & Sensoren</h3>
                        <p class="text-muted">3 Relays - 2 Widerstände - Platinen, Kabel etc.</p>
                    </div>
                </div>
            </div>
        </div>
          <p class="text-faded">

          </p>
    </section>
    <section id="twotwo" class="bg-dark">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="margin-top-0 text-thpurple">Benutzte Software</h2>
                    <hr class="primary">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg icon-nodejs wow fadeIn"  data-wow-delay=".3s"></i>
                        <h3>Node.js</h3>
                        <p class="text-muted">Node.js Framework</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                      <i class="icon-lg ion-social-python wow fadeIn" data-wow-delay=".3s" ></i>
                      <ion-icon name="logo-python"></ion-icon>

                        <h3>Python</h3>
                        <p class="text-muted">Python</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-social-github wow fadeIn" data-wow-delay=".3s"></i>
                        <h3>Github</h3>
                        <p class="text-muted">Github</p>
                    </div>
                </div>
            </div>
<!-- ****************************************************************************************************** -->
            <div class="row">
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg icon ion-social-html5 wow fadeIn"  data-wow-delay=".3s"></i>
                        <h3>HTML5</h3>
                        <p class="text-muted">HTML 5</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                      <i class="icon-lg ion-social-css3 wow fadeIn" data-wow-delay=".3s" ></i>
                      <ion-icon name="logo-python"></ion-icon>
                        <h3>CSS3</h3>
                        <p class="text-muted">CSS3</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 text-center">
                    <div class="feature">
                        <i class="icon-lg ion-social-javascript wow fadeIn" data-wow-delay=".3s"></i>
                        <h3>Javascript</h3>
                        <p class="text-muted">JS</p>
                    </div>
                </div>
            </div>

        </div>

    </section>
    <section id="three" class="no-padding">
        <div class="container-fluid">
            <div class="row no-gutter">
                <div class="col-lg-4 col-sm-6">
                    <a href="#galleryModal" class="gallery-box" data-toggle="modal" data-src="./assets/1.png">
                        <img src="./assets/1.png" class="img-responsive" alt="Image 1">
                        <div class="gallery-box-caption">
                            <div class="gallery-box-content">
                                <div>
                                    <i class="icon-lg ion-ios-search"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <a href="#galleryModal" class="gallery-box" data-toggle="modal" data-src="./assets/3.png">
                        <img src="./assets/3.png" class="img-responsive" alt="Image 2">
                        <div class="gallery-box-caption">
                            <div class="gallery-box-content">
                                <div>
                                    <i class="icon-lg ion-ios-search"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
				<div class="clearfix hidden-lg"> </div>
                <div class="col-lg-4 col-sm-6">
                    <a href="#galleryModal" class="gallery-box" data-toggle="modal" data-src="./assets/2.png">
                        <img src="./assets/2.png" class="img-responsive" alt="Image 3">
                        <div class="gallery-box-caption">
                            <div class="gallery-box-content">
                                <div>
                                    <i class="icon-lg ion-ios-search"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <a href="#galleryModal" class="gallery-box" data-toggle="modal" data-src="./assets/4.png">
                        <img src="./assets/4.png" class="img-responsive" alt="Image 4">
                        <div class="gallery-box-caption">
                            <div class="gallery-box-content">
                                <div>
                                    <i class="icon-lg ion-ios-search"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
				<div class="clearfix hidden-lg"> </div>
                <div class="col-lg-4 col-sm-6">
                    <a href="#galleryModal" class="gallery-box" data-toggle="modal" data-src="./assets/5.png">
                        <img src="./assets/5.png" class="img-responsive" alt="Image 5">
                        <div class="gallery-box-caption">
                            <div class="gallery-box-content">
                                <div>
                                    <i class="icon-lg ion-ios-search"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <a href="#galleryModal" class="gallery-box" data-toggle="modal" data-src="./assets/6.png">
                        <img src="./assets/6.png" class="img-responsive" alt="Image 6">
                        <div class="gallery-box-caption">
                            <div class="gallery-box-content">
                                <div>
                                    <i class="icon-lg ion-ios-search"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>
    <section class="container-fluid" id="four">
        <div class="row">
            <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4">
                <h2 class="text-center text-primary">Features</h2>
                <hr>
                <div class="media wow fadeInRight">
                    <h3>Einfach</h3>
                    <div class="media-body media-middle">
                        <p>Unser Code funktioniert sauber und schnell.</p>
                    </div>
                    <div class="media-right">
                        <i class="icon-lg ion-ios-bolt-outline"></i>
                    </div>
                </div>
                <hr>
                <div class="media wow fadeIn">
                    <h3>Kostenlos</h3>
                    <div class="media-left">
                        <a href="#alertModal" data-toggle="modal" data-target="#alertModal"><i class="icon-lg ion-ios-cloud-download-outline"></i></a>
                    </div>
                    <div class="media-body media-middle">
                        <p>Dieses Programm ist freie Software. Sie können es unter den Bedingungen der GNU General Public License, wie von der Free Software Foundation veröffentlicht, weitergeben und/oder modifizieren</p>
                    </div>
                </div>
                <hr>
                <div class="media wow fadeInRight">
                    <h3>Benutzerfreundlich</h3>
                    <div class="media-body media-middle">
                        <p>Mit einem einzigen Click kann sofort ein kleiner oder großer Kaffee gekocht werden.</p>
                    </div>
                    <div class="media-right">
                        <i class="icon-lg ion-happy-outline"></i>
                    </div>
                </div>
                <hr>
                <div class="media wow fadeIn">
                    <h3>Wir &nbsp;<i class="icon ion-ios-heart" style="color:red"></i>&nbsp; alle Endgeräte</h3>
                    <div class="media-left">
                        <i class="icon-lg ion-ios-heart-outline"></i>
                    </div>
                    <div class="media-body media-middle">
                        <p>Die Website ist mit allen Endgeräten kompatibel.</p>
                    </div>
                </div>
                <hr>
                <div class="media wow fadeInRight">
                    <h3>Getestet</h3>
                    <div class="media-body media-middle">
                        <p>Der Code funktioniert und ist nach bestem Wissen programmiert.</p>
                    </div>
                    <div class="media-right">
                        <i class="icon-lg ion-ios-flask-outline"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <aside class="bg-dark">
        <div class="container text-center">
            <div class="call-to-action">
                <h2 class="text-primary">Kostenlos herunterladen</h2>
                <a href="http://github.com/rehne/coffeefy" target="ext" class="btn btn-default btn-lg wow flipInX">Free Download</a>
            </div>
            <br>
            <hr/>
            <br>
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1">
                    <div class="row">
                        <h6 class="wide-space text-center">LADE DIR JETZT DEN CODE VON GITHUB</h6>
                        <div class="col-sm-12 text-center">
                            <i class="icon-lg ion-social-github" title="github"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <section id="last">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <h2 class="margin-top-0 wow fadeIn">Kontakt</h2>
                    <hr class="primary">
                    <p>Wir lieben Feedback! Fülle die Felder unten aus und wir werden uns schnellstmöglich melden.</p>
                </div>
                <div class="col-lg-10 col-lg-offset-1 text-center">
                    <form class="contact-form row">
                        <div class="col-md-4">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Name">
                        </div>
                        <div class="col-md-4">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Email">
                        </div>
                        <div class="col-md-4">
                            <label></label>
                            <input type="text" class="form-control" placeholder="Mobil">
                        </div>
                        <div class="col-md-12">
                            <label></label>
                            <textarea class="form-control" rows="9" placeholder="Deine Nachricht hier.."></textarea>
                        </div>
                        <div class="col-md-4 col-md-offset-4">
                            <label></label>
                            <button type="button" data-toggle="modal" data-target="#alertModal" class="btn btn-primary btn-block btn-lg">Senden <i class="ion-android-arrow-forward"></i></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <footer id="footer">
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-6 col-sm-3 column">
                    <h4>Information</h4>
                    <ul class="list-unstyled">
                        <li><a href="">TH Köln Homepage</a></li>
                        <li><a href="">Medieninformatik TH Köln</a></li>
                        <li><a href="">MOXD.IO</a></li>
                    </ul>
                </div>
                <div class="col-xs-6 col-sm-3 column">
                    <h4>About</h4>
                    <ul class="list-unstyled">
                        <li><a href="#">Kontaktiere uns</a></li>
                        <li><a href="#">Datenschutzbestimmungen</a></li>
                        <li><a href="#">Quellen</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-6 text-right">
                    <h4>Folge uns</h4>
                    <ul class="list-inline">
                      <li><a rel="nofollow" href="http://github.com/rehne/coffeefy" title="Github"><i class="icon-lg ion-social-github-outline"></i></a>&nbsp;</li>
                    </ul>
                </div>
            </div>
            <br/>
            <span class="pull-right text-muted small"><a href="http://github.com/rehne/coffeefy">Coffeefy</a> © 2016-2017 Krenn, Honnen, Thürling</span>
        </div>
    </footer>
    <div id="galleryModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
        <div class="modal-content">
        	<div class="modal-body">
        		<img src="" id="galleryImage" class="img-responsive" />
        		<p>
        		    <br/>
        		    <button class="btn btn-primary btn-lg center-block" data-dismiss="modal" aria-hidden="true">Close <i class="ion-android-close"></i></button>
        		</p>
        	</div>
        </div>
        </div>
    </div>
    <!--scripts loaded here -->
    <script>
      var output_messages = document.getElementById("messages");
      var output_status = document.getElementById("status");
      //var client = mqtt.connect('ws://test.mosquitto.org:8080');
      var client = mqtt.connect('ws://192.168.1.62:8080');
      //var active = false;
      var active = <%= status %>;
      if(active == 1){
        $('.btn').prop('disabled', true);
        //$('.btn').prop("value", "X");
        $('.btn').css("opacity", "0.3");

      } else {
        $('.btn').prop('disabled', false);
        //$('#small').prop("value", "Small Coffee");
        //$('#big').prop("value", "Big Coffee");
        //$('.btn').css("color", "green");
      }
      client.subscribe("coffeefy/messages");
      client.subscribe("coffeefy/sensors/ultrasonic");
      client.subscribe("coffeefy/status");
      client.on("message", function(topic, payload) {
        if (topic=="coffeefy/messages") {
          output_messages.innerHTML = payload;
        }
        if (topic=="coffeefy/status") {
          output_status.innerHTML = payload;
          $(document).ready(function(){
            if(payload == 1){
              active = 1;
              $('.btn').prop('disabled', true);
              $('.btn').prop("value", "X");
              $('.btn').css("color", "red");
            } else {
              active = 0;
              $('.btn').prop('disabled', false);
              $('#small').prop("value", "Small Coffee");
              $('#big').prop("value", "Big Coffee");
              $('.btn').css("color", "green");
            }
          })
        }
        if (topic=="coffeefy/sensors/ultrasonic") {
          $(document).ready(function(){
            if(payload > 5 && active == 0){
              $('.btn').prop('disabled', true);
              $('#distance').html('no Cup !');
            } else if (payload <= 5 && active == 0) {
              $('.btn').prop('disabled', false);
              $('#distance').html('OK');
            }
          })
        }
      });
    </script>
    <style>
      .hide { position:absolute; top:-1px; left:-1px; width:1px; height:1px; }
    </style>
    <!-- http://stackoverflow.com/a/5733858 -->
    <iframe name="hiddenFrame" class="hide"></iframe>
  </body>
</html>
